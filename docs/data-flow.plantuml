@startuml
skinparam componentStyle rectangle
skinparam shadowing false

' Define components
actor "User" as user
rectangle "Streamlit UI" as streamlit
rectangle "Load Balancer" as lb
rectangle "MCP Server" as server
rectangle "OPA Service" as opa
database "Policy Bundles" as policies
database "Data Files" as data

' Define flows
user --> streamlit : Access UI
streamlit --> lb : API Requests
lb --> server : Route Requests
server --> opa : Policy Eval
opa --> policies : Load Policies
server --> data : Store/Retrieve Data
streamlit --> data : Direct Data Access

note right of streamlit
  User Authentication
  Tool Selection
  File Upload
end note

note right of server
  CSV/Excel Processing
  Policy Enforcement
  Data Management
end note

note right of opa
  Policy Evaluation
  Decision Return
end note

note right of data
  Secure Storage
  Version Control
end note

@enduml